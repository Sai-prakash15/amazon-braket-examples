<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" />

    <!-- Generated with Sphinx 5.3.0 and Furo 2022.12.07 -->
        <title>Anatomy of Quantum Circuits and Quantum Tasks in Amazon Braket - Amazon Braket Examples documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?digest=91d0f0d1c444bdcb17a68e833c7a53903343c195" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../index.html"><div class="brand">Amazon Braket Examples  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../index.html">
  
  
  <span class="sidebar-brand-text">Amazon Braket Examples  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  
</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="anatomy-of-quantum-circuits-and-quantum-tasks-in-amazon-braket">
<h1>Anatomy of Quantum Circuits and Quantum Tasks in Amazon Braket<a class="headerlink" href="#anatomy-of-quantum-circuits-and-quantum-tasks-in-amazon-braket" title="Permalink to this heading">#</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Use Braket SDK Cost Tracking to estimate the cost to run this example</span>
<span class="kn">from</span> <span class="nn">braket.tracking</span> <span class="kn">import</span> <span class="n">Tracker</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">Tracker</span><span class="p">()</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>In this tutorial we discuss in detail the anatomy of quantum circuits in Amazon Braket’s SDK. Specifically, we learn how to build (parametrized) circuits and display them graphically, how to append circuits to each other, and discuss the associated circuit depth and circuit size. Finally we show how to execute our circuit on a device of our choice (defining a quantum task). We then learn how to efficiently track, log, recover or cancel such a <em>quantum task</em>.</p>
<section id="import-statements">
<h2>IMPORT STATEMENTS<a class="headerlink" href="#import-statements" title="Permalink to this heading">#</a></h2>
<p>First we import some modules we will need.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># general imports</span>
<span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="c1"># magic word for producing visualizations in notebook</span>
<span class="o">%</span><span class="k">matplotlib</span> inline
<span class="kn">import</span> <span class="nn">string</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="c1"># AWS imports: Import Braket SDK modules</span>
<span class="kn">from</span> <span class="nn">braket.circuits</span> <span class="kn">import</span> <span class="n">Circuit</span><span class="p">,</span> <span class="n">Gate</span><span class="p">,</span> <span class="n">Instruction</span><span class="p">,</span> <span class="n">circuit</span><span class="p">,</span> <span class="n">Observable</span><span class="p">,</span> <span class="n">FreeParameter</span>
<span class="kn">from</span> <span class="nn">braket.circuits.serialization</span> <span class="kn">import</span> <span class="n">IRType</span>
<span class="kn">from</span> <span class="nn">braket.aws</span> <span class="kn">import</span> <span class="n">AwsDevice</span><span class="p">,</span> <span class="n">AwsQuantumTask</span>
<span class="kn">from</span> <span class="nn">braket.devices</span> <span class="kn">import</span> <span class="n">LocalSimulator</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="circuit-definition">
<h2>CIRCUIT DEFINITION<a class="headerlink" href="#circuit-definition" title="Permalink to this heading">#</a></h2>
<p>Let us get started a sample circuit for four qubits (labelled q0, q1, q2 and q3) consisting of standard single-qubit <code class="docutils literal notranslate"><span class="pre">Hadamard</span></code> gates and two-qubit <code class="docutils literal notranslate"><span class="pre">CNOT</span></code> gates; for a full list of available gates see below. We can then visualize our circuit by simply calling the <code class="docutils literal notranslate"><span class="pre">print</span></code> function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># define circuit with 4 qubits</span>
<span class="n">my_circuit</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">()</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span><span class="o">.</span><span class="n">cnot</span><span class="p">(</span><span class="n">control</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">cnot</span><span class="p">(</span><span class="n">control</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">my_circuit</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>T  : |0| 1 |
            
q0 : -H-C---
        |   
q1 : -H-|-C-
        | | 
q2 : -H-X-|-
          | 
q3 : -H---X-

T  : |0| 1 |
</pre></div>
</div>
</div>
</div>
<p>Here, time is sliced up into moments. The circuit above consists of just two moments. First, we apply a <code class="docutils literal notranslate"><span class="pre">Hadamard</span></code> gate to every qubit in moment 0 and then we apply two <code class="docutils literal notranslate"><span class="pre">CNOT</span></code> gates. Since the latter can be run in parallel as they involve different sets of qubits, they only use up one moment of time. For better readability they are displayed next to each other with some small offset.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># show moments of our quantum circuit</span>
<span class="n">my_moments</span> <span class="o">=</span> <span class="n">my_circuit</span><span class="o">.</span><span class="n">moments</span>
<span class="k">for</span> <span class="n">moment</span> <span class="ow">in</span> <span class="n">my_moments</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">moment</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>MomentsKey(time=0, qubits=QubitSet([Qubit(0)]), moment_type=&lt;MomentType.GATE: &#39;gate&#39;&gt;, noise_index=0)
MomentsKey(time=0, qubits=QubitSet([Qubit(1)]), moment_type=&lt;MomentType.GATE: &#39;gate&#39;&gt;, noise_index=0)
MomentsKey(time=0, qubits=QubitSet([Qubit(2)]), moment_type=&lt;MomentType.GATE: &#39;gate&#39;&gt;, noise_index=0)
MomentsKey(time=0, qubits=QubitSet([Qubit(3)]), moment_type=&lt;MomentType.GATE: &#39;gate&#39;&gt;, noise_index=0)
MomentsKey(time=1, qubits=QubitSet([Qubit(0), Qubit(2)]), moment_type=&lt;MomentType.GATE: &#39;gate&#39;&gt;, noise_index=0)
MomentsKey(time=1, qubits=QubitSet([Qubit(1), Qubit(3)]), moment_type=&lt;MomentType.GATE: &#39;gate&#39;&gt;, noise_index=0)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># list all instructions/gates making up our circuit</span>
<span class="n">my_instructions</span> <span class="o">=</span> <span class="n">my_circuit</span><span class="o">.</span><span class="n">instructions</span>
<span class="k">for</span> <span class="n">instruction</span> <span class="ow">in</span> <span class="n">my_instructions</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">instruction</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Instruction(&#39;operator&#39;: H(&#39;qubit_count&#39;: 1), &#39;target&#39;: QubitSet([Qubit(0)]))
Instruction(&#39;operator&#39;: H(&#39;qubit_count&#39;: 1), &#39;target&#39;: QubitSet([Qubit(1)]))
Instruction(&#39;operator&#39;: H(&#39;qubit_count&#39;: 1), &#39;target&#39;: QubitSet([Qubit(2)]))
Instruction(&#39;operator&#39;: H(&#39;qubit_count&#39;: 1), &#39;target&#39;: QubitSet([Qubit(3)]))
Instruction(&#39;operator&#39;: CNot(&#39;qubit_count&#39;: 2), &#39;target&#39;: QubitSet([Qubit(0), Qubit(2)]))
Instruction(&#39;operator&#39;: CNot(&#39;qubit_count&#39;: 2), &#39;target&#39;: QubitSet([Qubit(1), Qubit(3)]))
</pre></div>
</div>
</div>
</div>
<p>Next, let us build a parametrized circuit where we have to supply numerical parameter values to fully define the circuit, as is the case for example for single-qubit rotations (as described <a class="reference external" href="https://github.com/aws/amazon-braket-sdk-python/blob/main/src/braket/circuits/gates.py#L578">here</a>) and the two-qubit <code class="docutils literal notranslate"><span class="pre">cnot</span></code> as described in the source code <a class="reference external" href="https://github.com/aws/amazon-braket-sdk-python/blob/main/src/braket/circuits/gates.py#L701">here</a>. The specific parameter values are shown in circuit diagram.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># define circuit with some parametrized gates </span>
<span class="n">my_circuit</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">()</span><span class="o">.</span><span class="n">rx</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">)</span><span class="o">.</span><span class="n">ry</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span><span class="o">.</span><span class="n">rz</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">)</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">cnot</span><span class="p">(</span><span class="n">control</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">cnot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">x</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">my_circuit</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>T  : |   0    | 1 |2|
                     
q0 : -Rx(0.15)-C-----
               |     
q1 : -Ry(0.20)-|-C-X-
               | |   
q2 : -Rz(0.25)-X-|---
                 |   
q3 : -H----------X-X-

T  : |   0    | 1 |2|
</pre></div>
</div>
</div>
</div>
<p>We can also create a <code class="docutils literal notranslate"><span class="pre">Circuit</span></code> with gates which depend on a <code class="docutils literal notranslate"><span class="pre">FreeParameter</span></code>, the value of which can be set later, either by fixing it in the circuit itself, or when the circuit is run on a device.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># define circuit with some parametrized gates and free parameters</span>
<span class="n">alpha</span> <span class="o">=</span> <span class="n">FreeParameter</span><span class="p">(</span><span class="s1">&#39;alpha&#39;</span><span class="p">)</span>
<span class="n">beta</span>  <span class="o">=</span> <span class="n">FreeParameter</span><span class="p">(</span><span class="s1">&#39;beta&#39;</span><span class="p">)</span>
<span class="n">gamma</span> <span class="o">=</span> <span class="n">FreeParameter</span><span class="p">(</span><span class="s1">&#39;gamma&#39;</span><span class="p">)</span>
<span class="n">my_circuit</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">()</span><span class="o">.</span><span class="n">rx</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">alpha</span><span class="p">)</span><span class="o">.</span><span class="n">ry</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">beta</span><span class="p">)</span><span class="o">.</span><span class="n">rz</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">gamma</span><span class="p">)</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">cnot</span><span class="p">(</span><span class="n">control</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">cnot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">x</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">my_circuit</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>T  : |    0    | 1 |2|
                      
q0 : -Rx(alpha)-C-----
                |     
q1 : -Ry(beta)--|-C-X-
                | |   
q2 : -Rz(gamma)-X-|---
                  |   
q3 : -H-----------X-X-

T  : |    0    | 1 |2|

Unassigned parameters: [alpha, beta, gamma].
</pre></div>
</div>
</div>
</div>
<p><strong>GATE SET</strong>: Below we list all gates currently available in our SDK. Moreover, we can build custom gates as shown below for a general single-qubit rotation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># print all available gates currently available within SDK</span>
<span class="n">gate_set</span> <span class="o">=</span> <span class="p">[</span><span class="n">attr</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">Gate</span><span class="p">)</span> <span class="k">if</span> <span class="n">attr</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">string</span><span class="o">.</span><span class="n">ascii_uppercase</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">gate_set</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;CCNot&#39;, &#39;CNot&#39;, &#39;CPhaseShift&#39;, &#39;CPhaseShift00&#39;, &#39;CPhaseShift01&#39;, &#39;CPhaseShift10&#39;, &#39;CSwap&#39;, &#39;CV&#39;, &#39;CY&#39;, &#39;CZ&#39;, &#39;ECR&#39;, &#39;GPi&#39;, &#39;GPi2&#39;, &#39;H&#39;, &#39;I&#39;, &#39;ISwap&#39;, &#39;MS&#39;, &#39;PSwap&#39;, &#39;PhaseShift&#39;, &#39;PulseGate&#39;, &#39;Rx&#39;, &#39;Ry&#39;, &#39;Rz&#39;, &#39;S&#39;, &#39;Si&#39;, &#39;Swap&#39;, &#39;T&#39;, &#39;Ti&#39;, &#39;Unitary&#39;, &#39;V&#39;, &#39;Vi&#39;, &#39;X&#39;, &#39;XX&#39;, &#39;XY&#39;, &#39;Y&#39;, &#39;YY&#39;, &#39;Z&#39;, &#39;ZZ&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># helper function to build custom gate </span>
<span class="k">def</span> <span class="nf">u3</span><span class="p">(</span><span class="n">alpha</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">phi</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    function to return matrix for general single qubit rotation</span>
<span class="sd">    rotation is given by exp(-i sigma*n/2*alpha) where alpha is rotation angle</span>
<span class="sd">    and n defines rotation axis as n=(sin(theta)cos(phi), sin(theta)sin(phi), cos(theta))</span>
<span class="sd">    sigma is vector of Pauli matrices</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">u11</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">alpha</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="n">j</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">alpha</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
    <span class="n">u12</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="n">j</span><span class="o">*</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="n">j</span><span class="o">*</span><span class="n">phi</span><span class="p">))</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">alpha</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">u21</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="n">j</span><span class="o">*</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="mi">1</span><span class="n">j</span><span class="o">*</span><span class="n">phi</span><span class="p">))</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">alpha</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">u22</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">alpha</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="n">j</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">alpha</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="n">u11</span><span class="p">,</span> <span class="n">u12</span><span class="p">],</span> <span class="p">[</span><span class="n">u21</span><span class="p">,</span> <span class="n">u22</span><span class="p">]])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># define and print custom unitary</span>
<span class="n">my_u3</span> <span class="o">=</span> <span class="n">u3</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="c1"># print(my_u3)</span>
<span class="c1"># define example circuit applying custom U to the first qubit</span>
<span class="n">circ</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">()</span><span class="o">.</span><span class="n">unitary</span><span class="p">(</span><span class="n">matrix</span><span class="o">=</span><span class="n">my_u3</span><span class="p">,</span> <span class="n">targets</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">cnot</span><span class="p">(</span><span class="n">control</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">circ</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>T  : |0|1|
          
q0 : -U-C-
        | 
q1 : -H-X-

T  : |0|1|
</pre></div>
</div>
</div>
</div>
<p>Here, in the circuit diagram our custom unitary is depicted with the general symbol <code class="docutils literal notranslate"><span class="pre">U</span></code>.
In addition, we can use Braket’s <code class="docutils literal notranslate"><span class="pre">circuit.subroutine</span></code> functionality, which allows us to use custom-built gates as any other built-in gates.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># helper function to build custom gate</span>
<span class="nd">@circuit</span><span class="o">.</span><span class="n">subroutine</span><span class="p">(</span><span class="n">register</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">u3</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">angles</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Function to return the matrix for a general single qubit rotation,</span>
<span class="sd">    given by exp(-i sigma*n/2*alpha), where alpha is the rotation angle,</span>
<span class="sd">    n defines the rotation axis via n=(sin(theta)cos(phi), sin(theta)sin(phi), cos(theta)),</span>
<span class="sd">    and sigma is the vector of Pauli matrices</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="c1"># get angles</span>
    <span class="n">alpha</span> <span class="o">=</span> <span class="n">angles</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">theta</span> <span class="o">=</span> <span class="n">angles</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">phi</span> <span class="o">=</span> <span class="n">angles</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    
    <span class="c1"># set 2x2 matrix entries</span>
    <span class="n">u11</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">alpha</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="n">j</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">alpha</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
    <span class="n">u12</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="n">j</span><span class="o">*</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="n">j</span><span class="o">*</span><span class="n">phi</span><span class="p">))</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">alpha</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">u21</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="n">j</span><span class="o">*</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="mi">1</span><span class="n">j</span><span class="o">*</span><span class="n">phi</span><span class="p">))</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">alpha</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">u22</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">alpha</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="n">j</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">alpha</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
    
    <span class="c1"># define unitary as numpy matrix</span>
    <span class="n">u</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="n">u11</span><span class="p">,</span> <span class="n">u12</span><span class="p">],</span> <span class="p">[</span><span class="n">u21</span><span class="p">,</span> <span class="n">u22</span><span class="p">]])</span>
    <span class="c1"># print(&#39;Unitary:&#39;, u)</span>
    
    <span class="c1"># define custom Braket gate</span>
    <span class="n">circ</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">()</span>
    <span class="n">circ</span><span class="o">.</span><span class="n">unitary</span><span class="p">(</span><span class="n">matrix</span><span class="o">=</span><span class="n">u</span><span class="p">,</span> <span class="n">targets</span><span class="o">=</span><span class="n">target</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">circ</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># define example circuit applying custom single-qubit gate U to the first qubit</span>
<span class="n">angles</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">]</span>
<span class="n">angles</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>

<span class="c1"># build circuit using custom u3 gate</span>
<span class="n">circ2</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">()</span><span class="o">.</span><span class="n">u3</span><span class="p">([</span><span class="mi">0</span><span class="p">],</span> <span class="n">angles</span><span class="p">)</span><span class="o">.</span><span class="n">cnot</span><span class="p">(</span><span class="n">control</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">circ2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>T  : |0|1|
          
q0 : -U-C-
        | 
q1 : ---X-

T  : |0|1|
</pre></div>
</div>
</div>
</div>
</section>
<section id="circuit-depth-and-circuit-size">
<h2>CIRCUIT DEPTH AND CIRCUIT SIZE<a class="headerlink" href="#circuit-depth-and-circuit-size" title="Permalink to this heading">#</a></h2>
<p>We can get the circuit depth (the number of moments defining our circuit) with <code class="docutils literal notranslate"><span class="pre">circuit.depth</span></code> as shown below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># define circuit with parametrized gates </span>
<span class="n">my_circuit</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">()</span><span class="o">.</span><span class="n">rx</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">)</span><span class="o">.</span><span class="n">ry</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span><span class="o">.</span><span class="n">rz</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">)</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">cnot</span><span class="p">(</span><span class="n">control</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">cnot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">circuit_depth</span> <span class="o">=</span> <span class="n">my_circuit</span><span class="o">.</span><span class="n">depth</span>
<span class="nb">print</span><span class="p">(</span><span class="n">my_circuit</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total circuit depth:&#39;</span><span class="p">,</span> <span class="n">circuit_depth</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>T  : |   0    | 1 |2|
                     
q0 : -Rx(0.15)-C---X-
               |     
q1 : -Ry(0.20)-|-C---
               | |   
q2 : -Rz(0.25)-X-|---
                 |   
q3 : -H----------X---

T  : |   0    | 1 |2|

Total circuit depth: 3
</pre></div>
</div>
</div>
</div>
<p>The total circuit depth of the circuit above is three (moments 0, 1, 2). It is three because we have added a single qubit <code class="docutils literal notranslate"><span class="pre">X</span></code> gate applied to qubit 0 in the final layer. However, note that gates are applied as early as possible in time, provided that this is not in conflict with any other gate that has to be applied before. See below an example where we add one qubit to which we only apply one single qubit <code class="docutils literal notranslate"><span class="pre">X</span></code> gate. This circuit is shallower as its circuit depth is only two. The <code class="docutils literal notranslate"><span class="pre">X</span></code> gate is applied to qubit 4 as early as possible even though we have applied the corresponding command at the end of our circuit definition.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># define circuit with parameterized gates </span>
<span class="n">my_circuit</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">()</span><span class="o">.</span><span class="n">rx</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">)</span><span class="o">.</span><span class="n">ry</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span><span class="o">.</span><span class="n">rz</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">)</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">cnot</span><span class="p">(</span><span class="n">control</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">cnot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="c1"># get circuit depth</span>
<span class="n">circuit_depth</span> <span class="o">=</span> <span class="n">my_circuit</span><span class="o">.</span><span class="n">depth</span>
<span class="c1"># get qubit number</span>
<span class="n">qubit_count</span> <span class="o">=</span> <span class="n">my_circuit</span><span class="o">.</span><span class="n">qubit_count</span>
<span class="c1"># get approx. estimate of circuit size</span>
<span class="n">circuit_size</span> <span class="o">=</span> <span class="n">circuit_depth</span><span class="o">*</span><span class="n">qubit_count</span>
<span class="c1"># print circuit</span>
<span class="nb">print</span><span class="p">(</span><span class="n">my_circuit</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="c1"># print characteristics of our circuit</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total circuit depth:&#39;</span><span class="p">,</span> <span class="n">circuit_depth</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Number of qubits:&#39;</span><span class="p">,</span> <span class="n">qubit_count</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Circuit size:&#39;</span><span class="p">,</span> <span class="n">circuit_size</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>T  : |   0    | 1 |
                   
q0 : -Rx(0.15)-C---
               |   
q1 : -Ry(0.20)-|-C-
               | | 
q2 : -Rz(0.25)-X-|-
                 | 
q3 : -H----------X-
                   
q4 : -X------------

T  : |   0    | 1 |

Total circuit depth: 2
Number of qubits: 5
Circuit size: 10
</pre></div>
</div>
</div>
</div>
<p>In the example above we have also introduced the concept of <strong>circuit size</strong>. Intuitively, the circuit size is a metric that reflects the complexity of our circuit. The circuit size accounts for both quantity (the number of qubits) and quality (as captured by the depth of the circuit); here we have used a very simple definition multiplying the qubit number with the circuit depth (that is the area of our diagram). In practice, in the absence of quantum error correction, on real quantum machines the depth is limited by noise so we can only faithfully run circuits whose depth is within the quality bounds of our machine. Simply speaking, this means: The larger the circuit size, the harder it is to simulate on a classical device and the more powerful the quantum machine is that is able to faithfully execute this circuit.</p>
</section>
<section id="appending-circuits">
<h2>APPENDING CIRCUITS<a class="headerlink" href="#appending-circuits" title="Permalink to this heading">#</a></h2>
<p>We can extend existing circuits by adding instructions or just appending circuits to each other, as shown below. In the most simple and straightforward fashion we can just append gates to existing circuits (for example, <code class="docutils literal notranslate"><span class="pre">my_circuit.y(4)</span></code>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># simple circuit extension by appending gates (here Y on qubit 4)</span>
<span class="n">my_circuit</span> <span class="o">=</span> <span class="n">my_circuit</span><span class="o">.</span><span class="n">y</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="c1"># get circuit depth</span>
<span class="n">circuit_depth</span> <span class="o">=</span> <span class="n">my_circuit</span><span class="o">.</span><span class="n">depth</span>
<span class="c1"># get qubit number</span>
<span class="n">qubit_count</span> <span class="o">=</span> <span class="n">my_circuit</span><span class="o">.</span><span class="n">qubit_count</span>
<span class="c1"># get circuit size</span>
<span class="n">circuit_size</span> <span class="o">=</span> <span class="n">circuit_depth</span><span class="o">*</span><span class="n">qubit_count</span>
<span class="c1"># print circuit</span>
<span class="nb">print</span><span class="p">(</span><span class="n">my_circuit</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total circuit depth:&#39;</span><span class="p">,</span> <span class="n">circuit_depth</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Number of qubits:&#39;</span><span class="p">,</span> <span class="n">qubit_count</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Circuit size:&#39;</span><span class="p">,</span> <span class="n">circuit_size</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>T  : |   0    | 1 |
                   
q0 : -Rx(0.15)-C---
               |   
q1 : -Ry(0.20)-|-C-
               | | 
q2 : -Rz(0.25)-X-|-
                 | 
q3 : -H----------X-
                   
q4 : -X--------Y---

T  : |   0    | 1 |

Total circuit depth: 2
Number of qubits: 5
Circuit size: 10
</pre></div>
</div>
</div>
</div>
<p>Alternatively, we can define a gate as an <code class="docutils literal notranslate"><span class="pre">Instruction</span></code> and use the <code class="docutils literal notranslate"><span class="pre">add_instruction(...)</span></code> method to add this gate to an existing circuit object.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># add instruction to circuit</span>
<span class="n">gate_instr</span> <span class="o">=</span> <span class="n">Instruction</span><span class="p">(</span><span class="n">Gate</span><span class="o">.</span><span class="n">CNot</span><span class="p">(),</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">my_circuit</span> <span class="o">=</span> <span class="n">my_circuit</span><span class="o">.</span><span class="n">add_instruction</span><span class="p">(</span><span class="n">gate_instr</span><span class="p">)</span>
<span class="c1"># get circuit depth</span>
<span class="n">circuit_depth</span> <span class="o">=</span> <span class="n">my_circuit</span><span class="o">.</span><span class="n">depth</span>
<span class="c1"># get qubit number</span>
<span class="n">qubit_count</span> <span class="o">=</span> <span class="n">my_circuit</span><span class="o">.</span><span class="n">qubit_count</span>
<span class="c1"># get circuit size</span>
<span class="n">circuit_size</span> <span class="o">=</span> <span class="n">circuit_depth</span><span class="o">*</span><span class="n">qubit_count</span>
<span class="c1"># print circuit</span>
<span class="nb">print</span><span class="p">(</span><span class="n">my_circuit</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total circuit depth:&#39;</span><span class="p">,</span> <span class="n">circuit_depth</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Number of qubits:&#39;</span><span class="p">,</span> <span class="n">qubit_count</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Circuit size:&#39;</span><span class="p">,</span> <span class="n">circuit_size</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>T  : |   0    | 1 |2|
                     
q0 : -Rx(0.15)-C---C-
               |   | 
q1 : -Ry(0.20)-|-C-X-
               | |   
q2 : -Rz(0.25)-X-|---
                 |   
q3 : -H----------X---
                     
q4 : -X--------Y-----

T  : |   0    | 1 |2|

Total circuit depth: 3
Number of qubits: 5
Circuit size: 15
</pre></div>
</div>
</div>
</div>
<p>We can append entire circuits to each other with <code class="docutils literal notranslate"><span class="pre">add_circuit()</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># append two circuits with add_circuit() functionality</span>
<span class="n">my_circuit2</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">()</span><span class="o">.</span><span class="n">rz</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span><span class="o">.</span><span class="n">rz</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span><span class="o">.</span><span class="n">rz</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)</span><span class="o">.</span><span class="n">rz</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">)</span>
<span class="n">my_circuit</span><span class="o">.</span><span class="n">add_circuit</span><span class="p">(</span><span class="n">my_circuit2</span><span class="p">)</span>

<span class="c1"># get circuit depth</span>
<span class="n">circuit_depth</span> <span class="o">=</span> <span class="n">my_circuit</span><span class="o">.</span><span class="n">depth</span>
<span class="c1"># get qubit number</span>
<span class="n">qubit_count</span> <span class="o">=</span> <span class="n">my_circuit</span><span class="o">.</span><span class="n">qubit_count</span>
<span class="c1"># get circuit size</span>
<span class="n">circuit_size</span> <span class="o">=</span> <span class="n">circuit_depth</span><span class="o">*</span><span class="n">qubit_count</span>
<span class="c1"># print circuit</span>
<span class="nb">print</span><span class="p">(</span><span class="n">my_circuit</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="c1"># print characteristics of our circuit</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total circuit depth:&#39;</span><span class="p">,</span> <span class="n">circuit_depth</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Number of qubits:&#39;</span><span class="p">,</span> <span class="n">qubit_count</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Circuit size:&#39;</span><span class="p">,</span> <span class="n">circuit_size</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>T  : |   0    | 1 |   2    |   3    |
                                     
q0 : -Rx(0.15)-C---C--------Rz(0.10)-
               |   |                 
q1 : -Ry(0.20)-|-C-X--------Rz(0.20)-
               | |                   
q2 : -Rz(0.25)-X-|-------------------
                 |                   
q3 : -H----------X-Rz(0.30)----------
                                     
q4 : -X--------Y---Rz(0.40)----------

T  : |   0    | 1 |   2    |   3    |

Total circuit depth: 4
Number of qubits: 5
Circuit size: 20
</pre></div>
</div>
</div>
</div>
<p>Again, note that the single qubit rotations we have appended to our circuit are applied as early as possible. This helps keeping the circuit as short as possible, as required in the presence of decoherence.</p>
</section>
<section id="circuit-execution-and-task-tracking">
<h2>CIRCUIT EXECUTION AND TASK TRACKING<a class="headerlink" href="#circuit-execution-and-task-tracking" title="Permalink to this heading">#</a></h2>
<p>Finally, let us run our circuit on a device of our choice. We do so by defining a classical <code class="docutils literal notranslate"><span class="pre">device</span></code> object below and calling the method <code class="docutils literal notranslate"><span class="pre">device.run(my_circuit)</span></code>. Additional <em>task creation</em> arguments can be provided to the <code class="docutils literal notranslate"><span class="pre">run()</span></code> method of the device object; in particular the optional “shots” argument refers to the number of desired measurement shots (default = 1000).</p>
<p>The command <code class="docutils literal notranslate"><span class="pre">device.run(...)</span></code> defines a task (with a unique task ID), the status of which can be queried and tracked with <code class="docutils literal notranslate"><span class="pre">task.state()</span></code> as shown below. Once the task completes (which may take some time, specifically for the QPU devices, depending on the length of the queue), one can retrieve the results from the S3 bucket as specified below; you can check for “Task Status” under Tasks within your Braket console. Note that <code class="docutils literal notranslate"><span class="pre">task</span> <span class="pre">=</span> <span class="pre">device.run()</span></code> is an <em>asynchronous</em> operation. This means you can keep working while the system in the background polls for the results. You can always check the task status with <code class="docutils literal notranslate"><span class="pre">task.state()</span></code>. When you call <code class="docutils literal notranslate"><span class="pre">task.result()</span></code>, this becomes a blocking call that will throw an error if within the timeout period you will not get a result. We show below how to set this timeout period.</p>
<p>By calling <code class="docutils literal notranslate"><span class="pre">result()</span></code> on a task, you get the quantum task result by polling Amazon Braket to see if the task is completed. Once the task is completed, the result is retrieved from S3 and returned as a <code class="docutils literal notranslate"><span class="pre">QuantumTaskResult</span></code>. As opposed to <code class="docutils literal notranslate"><span class="pre">async_result()</span></code>, this method is a blocking thread call and synchronously returns a result.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create the device. The experiment value must be unique among any devices in use at the tim</span>
<span class="n">device</span> <span class="o">=</span> <span class="n">AwsDevice</span><span class="p">(</span><span class="s2">&quot;arn:aws:braket:::device/quantum-simulator/amazon/sv1&quot;</span><span class="p">)</span>

<span class="c1"># set up the device to be the Rigetti quantum computer</span>
<span class="c1"># device = AwsDevice(&quot;arn:aws:braket:us-west-1::device/qpu/rigetti/Aspen-M-2&quot;)</span>

<span class="c1"># set up the device to be the IonQ quantum computer</span>
<span class="c1"># device = AwsDevice(&quot;arn:aws:braket:::device/qpu/ionq/ionQdevice&quot;)</span>

<span class="c1"># set up the device to be the Oxford Quantum Circuits (OQC) quantum computer</span>
<span class="c1"># device = AwsDevice(&quot;arn:aws:braket:eu-west-2::device/qpu/oqc/Lucy&quot;)</span>
</pre></div>
</div>
</div>
</div>
<p>We can check out the set of gates this device supports as follows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># show the properties of the device</span>
<span class="n">device_properties</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">properties</span>
<span class="c1"># show supportedQuantumOperations (supported gates for a device)</span>
<span class="n">device_operations</span> <span class="o">=</span> <span class="n">device_properties</span><span class="o">.</span><span class="n">dict</span><span class="p">()[</span><span class="s1">&#39;action&#39;</span><span class="p">][</span><span class="s1">&#39;braket.ir.jaqcd.program&#39;</span><span class="p">][</span><span class="s1">&#39;supportedOperations&#39;</span><span class="p">]</span>
<span class="c1"># Note: This field also exists for other devices like the QPUs</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Quantum Gates supported by this device:</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span><span class="n">device_operations</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Quantum Gates supported by this device:
 [&#39;ccnot&#39;, &#39;cnot&#39;, &#39;cphaseshift&#39;, &#39;cphaseshift00&#39;, &#39;cphaseshift01&#39;, &#39;cphaseshift10&#39;, &#39;cswap&#39;, &#39;cy&#39;, &#39;cz&#39;, &#39;ecr&#39;, &#39;h&#39;, &#39;i&#39;, &#39;iswap&#39;, &#39;pswap&#39;, &#39;phaseshift&#39;, &#39;rx&#39;, &#39;ry&#39;, &#39;rz&#39;, &#39;s&#39;, &#39;si&#39;, &#39;swap&#39;, &#39;t&#39;, &#39;ti&#39;, &#39;unitary&#39;, &#39;v&#39;, &#39;vi&#39;, &#39;x&#39;, &#39;xx&#39;, &#39;xy&#39;, &#39;y&#39;, &#39;yy&#39;, &#39;z&#39;, &#39;zz&#39;]
</pre></div>
</div>
</div>
</div>
<p><strong>POLLING PARAMETERS</strong>: With the <code class="docutils literal notranslate"><span class="pre">run(...)</span></code> method we can set two important parameters:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">poll_timeout_seconds</span></code> is the number of seconds you want to wait and poll the task before it times out; the default value is 5 days (that is $\sim 5<em>60</em>60*24$ seconds).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">poll_interval_seconds</span></code> is the frequency how often the task is polled, e.g., how often you call the Braket API to get the status; the default value is 1 second.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># define task (asynchronous)</span>
<span class="n">task</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">my_circuit</span><span class="p">,</span> 
                  <span class="n">poll_timeout_seconds</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> 
                  <span class="n">shots</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>

<span class="c1"># get id and status of submitted task</span>
<span class="n">task_id</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">id</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">state</span><span class="p">()</span>
<span class="c1"># print(&#39;ID of task:&#39;, task_id)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Status of task:&#39;</span><span class="p">,</span> <span class="n">status</span><span class="p">)</span>

<span class="c1"># wait for job to complete</span>
<span class="k">while</span> <span class="n">status</span> <span class="o">!=</span> <span class="s1">&#39;COMPLETED&#39;</span><span class="p">:</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">state</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Status:&#39;</span><span class="p">,</span> <span class="n">status</span><span class="p">)</span>

<span class="c1"># get results of task</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>

<span class="c1"># get measurement shots</span>
<span class="n">counts</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">measurement_counts</span>

<span class="c1"># print counts</span>
<span class="nb">print</span><span class="p">(</span><span class="n">counts</span><span class="p">)</span>

<span class="c1"># plot using Counter</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">counts</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">counts</span><span class="o">.</span><span class="n">values</span><span class="p">());</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;bitstrings&#39;</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;counts&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Status of task: CREATED
Status: CREATED
Status: CREATED
Status: QUEUED
Status: QUEUED
Status: QUEUED
Status: RUNNING
Status: RUNNING
Status: RUNNING
Status: RUNNING
Status: COMPLETED
Counter({&#39;00010&#39;: 503, &#39;00000&#39;: 488, &#39;11100&#39;: 5, &#39;01010&#39;: 2, &#39;01000&#39;: 2})
</pre></div>
</div>
<img alt="../../../_images/72ff060d832e667b98af7e5dd0897260b5c166559d944995fba76ca4631b083f.png" src="../../../_images/72ff060d832e667b98af7e5dd0897260b5c166559d944995fba76ca4631b083f.png" />
</div>
</div>
<p>The on-demand simulators SV1 and DM1 also support running parametrized tasks. The value of any free parameters can be fixed when the circuit is run using the optional <code class="docutils literal notranslate"><span class="pre">inputs</span></code> argument to <code class="docutils literal notranslate"><span class="pre">run</span></code>. <code class="docutils literal notranslate"><span class="pre">inputs</span></code> should be a <code class="docutils literal notranslate"><span class="pre">dict</span></code> of <code class="docutils literal notranslate"><span class="pre">string</span></code>-<code class="docutils literal notranslate"><span class="pre">float</span></code> pairs.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># define circuit with some parametrized gates and free parameters</span>
<span class="n">alpha</span> <span class="o">=</span> <span class="n">FreeParameter</span><span class="p">(</span><span class="s1">&#39;alpha&#39;</span><span class="p">)</span>
<span class="n">beta</span>  <span class="o">=</span> <span class="n">FreeParameter</span><span class="p">(</span><span class="s1">&#39;beta&#39;</span><span class="p">)</span>
<span class="n">gamma</span> <span class="o">=</span> <span class="n">FreeParameter</span><span class="p">(</span><span class="s1">&#39;gamma&#39;</span><span class="p">)</span>
<span class="n">my_circuit</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">()</span><span class="o">.</span><span class="n">rx</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">alpha</span><span class="p">)</span><span class="o">.</span><span class="n">ry</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">beta</span><span class="p">)</span><span class="o">.</span><span class="n">rz</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">gamma</span><span class="p">)</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">cnot</span><span class="p">(</span><span class="n">control</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">cnot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">x</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">my_circuit</span><span class="p">)</span>
<span class="c1"># define task (asynchronous)</span>
<span class="n">task</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">my_circuit</span><span class="p">,</span> 
                  <span class="n">poll_timeout_seconds</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> 
                  <span class="n">shots</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;alpha&#39;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span> <span class="s1">&#39;beta&#39;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span> <span class="s1">&#39;gamma&#39;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">})</span>

<span class="c1"># get id and status of submitted task</span>
<span class="n">task_id</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">id</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">state</span><span class="p">()</span>
<span class="c1"># print(&#39;ID of task:&#39;, task_id)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Status of task:&#39;</span><span class="p">,</span> <span class="n">status</span><span class="p">)</span>

<span class="c1"># wait for job to complete</span>
<span class="k">while</span> <span class="n">status</span> <span class="o">!=</span> <span class="s1">&#39;COMPLETED&#39;</span><span class="p">:</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">state</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Status:&#39;</span><span class="p">,</span> <span class="n">status</span><span class="p">)</span>

<span class="c1"># get results of task</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>

<span class="c1"># get measurement shots</span>
<span class="n">counts</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">measurement_counts</span>

<span class="c1"># print counts</span>
<span class="nb">print</span><span class="p">(</span><span class="n">counts</span><span class="p">)</span>

<span class="c1"># plot using Counter</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">counts</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">counts</span><span class="o">.</span><span class="n">values</span><span class="p">());</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;bitstrings&#39;</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;counts&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>T  : |    0    | 1 |2|
                      
q0 : -Rx(alpha)-C-----
                |     
q1 : -Ry(beta)--|-C-X-
                | |   
q2 : -Rz(gamma)-X-|---
                  |   
q3 : -H-----------X-X-

T  : |    0    | 1 |2|

Unassigned parameters: [alpha, beta, gamma].
Status of task: CREATED
Status: CREATED
Status: CREATED
Status: CREATED
Status: QUEUED
Status: QUEUED
Status: RUNNING
Status: RUNNING
Status: RUNNING
Status: RUNNING
Status: RUNNING
Status: COMPLETED
Counter({&#39;0101&#39;: 501, &#39;0100&#39;: 485, &#39;0000&#39;: 7, &#39;0001&#39;: 4, &#39;1110&#39;: 2, &#39;1111&#39;: 1})
</pre></div>
</div>
<img alt="../../../_images/9adf1d4fecb0a86fa5e919534aa24fb3505c7fdd5aedee3f769f61e9d9b3660d.png" src="../../../_images/9adf1d4fecb0a86fa5e919534aa24fb3505c7fdd5aedee3f769f61e9d9b3660d.png" />
</div>
</div>
<p><strong>TASK METADATA</strong>: You can access a range of metadata associated with your <code class="docutils literal notranslate"><span class="pre">task</span></code> object, as shown below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># get all metadata of submitted task</span>
<span class="n">metadata</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">metadata</span><span class="p">()</span>
<span class="c1"># example for metadata</span>
<span class="n">shots</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;shots&#39;</span><span class="p">]</span>
<span class="n">date</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;ResponseMetadata&#39;</span><span class="p">][</span><span class="s1">&#39;HTTPHeaders&#39;</span><span class="p">][</span><span class="s1">&#39;date&#39;</span><span class="p">]</span>
<span class="c1"># print example metadata</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> shots taken on </span><span class="si">{}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">shots</span><span class="p">,</span> <span class="n">date</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1000 shots taken on Thu, 10 Nov 2022 17:19:03 GMT.
</pre></div>
</div>
</div>
</div>
<p><strong>TASK RECONSTRUCTION</strong>: Imagine your kernel dies after you have submitted the task, or you simply close your notebook. As recovery method, here is how you can reconstruct the <code class="docutils literal notranslate"><span class="pre">task</span></code> object (given the corresponding unique arn). You can reconstruct the <code class="docutils literal notranslate"><span class="pre">task</span></code> object using <code class="docutils literal notranslate"><span class="pre">task</span> <span class="pre">=</span> <span class="pre">AwsQuantumTask(arn=...)</span></code>; then you can simply call <code class="docutils literal notranslate"><span class="pre">task.result()</span></code> to get the result from S3.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># restore task from unique arn</span>
<span class="n">task_load</span> <span class="o">=</span> <span class="n">AwsQuantumTask</span><span class="p">(</span><span class="n">arn</span><span class="o">=</span><span class="n">task_id</span><span class="p">)</span>
<span class="c1"># print status</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">task_load</span><span class="o">.</span><span class="n">state</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Status of (reconstructed) task:&#39;</span><span class="p">,</span> <span class="n">status</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Status of (reconstructed) task: COMPLETED
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># get results of task</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">task_load</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>

<span class="c1"># get measurement shots</span>
<span class="n">counts</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">measurement_counts</span>

<span class="c1"># print counts</span>
<span class="nb">print</span><span class="p">(</span><span class="n">counts</span><span class="p">)</span>

<span class="c1"># plot using Counter</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">counts</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">counts</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;g&#39;</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;bitstrings&#39;</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;counts&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Counter({&#39;0101&#39;: 501, &#39;0100&#39;: 485, &#39;0000&#39;: 7, &#39;0001&#39;: 4, &#39;1110&#39;: 2, &#39;1111&#39;: 1})
</pre></div>
</div>
<img alt="../../../_images/ce5ecd050631061308044086eebd5416079b2a64f4b8ae98634f4e631fe42fb2.png" src="../../../_images/ce5ecd050631061308044086eebd5416079b2a64f4b8ae98634f4e631fe42fb2.png" />
</div>
</div>
<p><strong>TASK CANCELLATION</strong>: Finally, we can also cancel existing tasks by calling the <code class="docutils literal notranslate"><span class="pre">cancel()</span></code> method.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># define task</span>
<span class="n">task</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">my_circuit</span><span class="p">,</span> <span class="n">shots</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;alpha&#39;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span> <span class="s1">&#39;beta&#39;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span> <span class="s1">&#39;gamma&#39;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">})</span>

<span class="c1"># get id and status of submitted task</span>
<span class="n">task_id</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">id</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">state</span><span class="p">()</span>
<span class="c1"># print(&#39;ID of task:&#39;, task_id)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Status of task:&#39;</span><span class="p">,</span> <span class="n">status</span><span class="p">)</span>

<span class="c1"># cancel task </span>
<span class="n">task</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">state</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Status of task:&#39;</span><span class="p">,</span> <span class="n">status</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Status of task: CREATED
Status of task: CANCELLING
</pre></div>
</div>
</div>
</div>
</section>
<section id="demonstration-of-result-types-expectation-values-and-observables">
<h2>DEMONSTRATION OF RESULT TYPES: Expectation Values and Observables<a class="headerlink" href="#demonstration-of-result-types-expectation-values-and-observables" title="Permalink to this heading">#</a></h2>
<p>So far, we have only taken measurements in the computational basis. However, it is also possible to measure in other bases, as well as estimate important statistics like expectation value and variance. We do this by adding <code class="docutils literal notranslate"><span class="pre">ResultType</span></code>s to our circuit; in the following example, we will make measurements in the basis of the observable $X_{0}Y_{1}$ (this is the tensor product $X(0) \otimes Y(1)$):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># define example circuit</span>
<span class="n">circ</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">()</span><span class="o">.</span><span class="n">rx</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">)</span><span class="o">.</span><span class="n">ry</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span><span class="o">.</span><span class="n">rz</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">)</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">cnot</span><span class="p">(</span><span class="n">control</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">cnot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="c1"># add expectation value</span>
<span class="n">obs</span> <span class="o">=</span> <span class="n">Observable</span><span class="o">.</span><span class="n">X</span><span class="p">()</span> <span class="o">@</span> <span class="n">Observable</span><span class="o">.</span><span class="n">Y</span><span class="p">()</span>
<span class="n">target_qubits</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">circ</span><span class="o">.</span><span class="n">expectation</span><span class="p">(</span><span class="n">obs</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="n">target_qubits</span><span class="p">)</span>
<span class="c1"># add variance</span>
<span class="n">circ</span><span class="o">.</span><span class="n">variance</span><span class="p">(</span><span class="n">obs</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="n">target_qubits</span><span class="p">)</span> 
<span class="c1"># add samples</span>

<span class="n">circ</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">obs</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="n">target_qubits</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">circ</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>T  : |   0    | 1 |               Result Types               |
                                                              
q0 : -Rx(0.15)-C---Expectation(X@Y)-Variance(X@Y)-Sample(X@Y)-
               |   |                |             |           
q1 : -Ry(0.20)-|-C-Expectation(X@Y)-Variance(X@Y)-Sample(X@Y)-
               | |                                            
q2 : -Rz(0.25)-X-|--------------------------------------------
                 |                                            
q3 : -H----------X--------------------------------------------
                                                              
q4 : -X-------------------------------------------------------

T  : |   0    | 1 |               Result Types               |
</pre></div>
</div>
</div>
</div>
<p><em>Note</em>: <code class="docutils literal notranslate"><span class="pre">sample</span></code> is only valid when <code class="docutils literal notranslate"><span class="pre">shots&gt;0</span></code>.</p>
<p>As shown above, results types are part of the <code class="docutils literal notranslate"><span class="pre">print</span></code> information. We now run this circuit on the local simulator above and output these results.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># set up device</span>
<span class="n">device</span> <span class="o">=</span> <span class="n">LocalSimulator</span><span class="p">()</span>
<span class="c1"># run the circuit and output the results specified above</span>
<span class="n">task</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">circ</span><span class="p">,</span> <span class="n">shots</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Expectation value for &lt;X0*Y1&gt;:&quot;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Variance for &lt;X0*Y1&gt;:&quot;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Measurement samples for X0*Y1:&quot;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Expectation value for &lt;X0*Y1&gt;: 0.08
Variance for &lt;X0*Y1&gt;: 0.9936
Measurement samples for X0*Y1: [-1.  1. -1.  1.  1.  1. -1. -1. -1.  1.  1.  1.  1. -1.  1.  1. -1. -1.
 -1. -1. -1. -1.  1.  1.  1. -1. -1. -1.  1. -1.  1.  1. -1.  1. -1.  1.
 -1.  1.  1. -1. -1. -1.  1.  1.  1. -1.  1.  1. -1.  1.  1. -1.  1.  1.
  1.  1. -1. -1.  1.  1.  1. -1.  1. -1.  1.  1.  1. -1. -1.  1. -1. -1.
 -1. -1.  1.  1. -1. -1.  1.  1.  1. -1.  1. -1. -1. -1. -1.  1.  1. -1.
  1.  1. -1.  1. -1. -1.  1.  1.  1.  1.]
</pre></div>
</div>
</div>
</div>
<p>We can verify that we get the same estimate for the expectation value if we compute it by hand from the samples:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">samples</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="n">sum_of_samples</span> <span class="o">=</span> <span class="n">samples</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">total_counts</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">samples</span><span class="p">)</span>
<span class="n">expect_from_samples</span> <span class="o">=</span> <span class="n">sum_of_samples</span><span class="o">/</span><span class="n">total_counts</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Expectation value from samples:&#39;</span><span class="p">,</span> <span class="n">expect_from_samples</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Expectation value from samples: 0.08
</pre></div>
</div>
</div>
</div>
<p>So far, we have measured only one observable, namely $X_{0}Y_{1}$. However, it is possible to measure multiple observables at once, provided that any observables with overlapping qubits have the same factor acting on each qubit:</p>
<div class="alert alert-block alert-info">
<b>Note</b> The following code requires amazon-braket-sdk>=1.5.0 and amazon-braket-default-simulator>=1.1.0
</div><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">circ</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">()</span><span class="o">.</span><span class="n">rx</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">)</span><span class="o">.</span><span class="n">ry</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span><span class="o">.</span><span class="n">rz</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">)</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">cnot</span><span class="p">(</span><span class="n">control</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">cnot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">circ</span><span class="o">.</span><span class="n">expectation</span><span class="p">(</span><span class="n">Observable</span><span class="o">.</span><span class="n">X</span><span class="p">()</span> <span class="o">@</span> <span class="n">Observable</span><span class="o">.</span><span class="n">Y</span><span class="p">(),</span> <span class="n">target</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">circ</span><span class="o">.</span><span class="n">expectation</span><span class="p">(</span><span class="n">Observable</span><span class="o">.</span><span class="n">Z</span><span class="p">()</span> <span class="o">@</span> <span class="n">Observable</span><span class="o">.</span><span class="n">H</span><span class="p">(),</span> <span class="n">target</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="c1"># Overlaps on qubits 1 and 4, but Y and H are the same factors that have been applied to each, respectively</span>
<span class="n">circ</span><span class="o">.</span><span class="n">expectation</span><span class="p">(</span><span class="n">Observable</span><span class="o">.</span><span class="n">Y</span><span class="p">()</span> <span class="o">@</span> <span class="n">Observable</span><span class="o">.</span><span class="n">X</span><span class="p">()</span> <span class="o">@</span> <span class="n">Observable</span><span class="o">.</span><span class="n">H</span><span class="p">(),</span> <span class="n">target</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>

<span class="c1"># run circuit</span>
<span class="n">task</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">circ</span><span class="p">,</span> <span class="n">shots</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Expectation value for &lt;X0*Y1&gt;:&quot;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Expectation value for &lt;Z2*H4&gt;:&quot;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Expectation value for &lt;Y1*X3*H4&gt;::&quot;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Expectation value for &lt;X0*Y1&gt;: -0.022
Expectation value for &lt;Z2*H4&gt;: -0.668
Expectation value for &lt;Y1*X3*H4&gt;:: -0.024
</pre></div>
</div>
</div>
</div>
<p>This is possible because we only need to measure in at most one basis for each qubit. For instance in the example above, on qubit 1 we only measure in the Y basis.</p>
<section id="result-types-for-shots-0">
<h3>RESULT TYPES FOR <code class="docutils literal notranslate"><span class="pre">shots=0</span></code><a class="headerlink" href="#result-types-for-shots-0" title="Permalink to this heading">#</a></h3>
<div class="alert alert-block alert-info">
<b>Note</b> This section requires amazon-braket-sdk>=1.8.0 and amazon-braket-default-simulator>=1.3.0
</div>
<p>In all examples discussed so far we have set the parameter <code class="docutils literal notranslate"><span class="pre">shots&gt;0</span></code>, thereby mimicking the behavior of actual quantum hardware. However, on a classical simulator we do have access to the full state vector when <code class="docutils literal notranslate"><span class="pre">shots=0</span></code>. We will illustrate this functionality in more detail in this section.</p>
<p>Note that the full state vector and amplitudes can only be requested when <code class="docutils literal notranslate"><span class="pre">shots=0</span></code> for a classical simulator.
When <code class="docutils literal notranslate"><span class="pre">shots=0</span></code> for a simulator, probability and expectation values are the exact values, as derived from the full wavefunction.
When <code class="docutils literal notranslate"><span class="pre">shots&gt;0</span></code> we cannot access the full state vector, but we can still get approximate expectation values as taken from measurement samples. Note that probability, sample, expectation, and variance are also supported for QPU devices.</p>
<p>In the following example we output the state vector, the exact expectation values of $Y_{1}X_{2}$ and $Z_{0}Z_{1}$, the amplitude of the state $|00000\rangle$, and the marginal probability of qubit $3$. Notice in particular that the two observables share qubit $1$ but don’t have the same factor acting on it; this is allowed because simulators can directly compute expectation values using the state vector, and don’t have to measure in a common basis.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># add result types</span>
<span class="n">circ</span> <span class="o">=</span> <span class="n">my_circuit</span>
<span class="c1"># add the state_vector ResultType available for shots=0</span>
<span class="n">circ</span><span class="o">.</span><span class="n">state_vector</span><span class="p">()</span> 
<span class="c1"># add single qubit expectation value</span>
<span class="n">obs1</span> <span class="o">=</span> <span class="n">Observable</span><span class="o">.</span><span class="n">Y</span><span class="p">()</span> <span class="o">@</span> <span class="n">Observable</span><span class="o">.</span><span class="n">X</span><span class="p">()</span>
<span class="n">circ</span><span class="o">.</span><span class="n">expectation</span><span class="p">(</span><span class="n">obs1</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="c1"># add the two-qubit Z0*Z1 expectation value</span>
<span class="n">obs2</span> <span class="o">=</span> <span class="n">Observable</span><span class="o">.</span><span class="n">Z</span><span class="p">()</span> <span class="o">@</span> <span class="n">Observable</span><span class="o">.</span><span class="n">Z</span><span class="p">()</span>
<span class="n">circ</span><span class="o">.</span><span class="n">expectation</span><span class="p">(</span><span class="n">obs2</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span> 
<span class="c1"># add the amplitude for |0...0&gt;</span>
<span class="n">bitstring</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span><span class="o">*</span><span class="n">circ</span><span class="o">.</span><span class="n">qubit_count</span>
<span class="n">circ</span><span class="o">.</span><span class="n">amplitude</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="p">[</span><span class="n">bitstring</span><span class="p">])</span> 
<span class="c1"># add marginal probability </span>
<span class="n">circ</span><span class="o">.</span><span class="n">probability</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">circ</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>T  : |    0    | 1 |2|          Result Types           |
                                                        
q0 : -Rx(alpha)-C----------------------Expectation(Z@Z)-
                |                      |                
q1 : -Ry(beta)--|-C-X-Expectation(Y@X)-Expectation(Z@Z)-
                | |   |                                 
q2 : -Rz(gamma)-X-|---Expectation(Y@X)------------------
                  |                                     
q3 : -H-----------X-X-Probability-----------------------

T  : |    0    | 1 |2|          Result Types           |

Additional result types: StateVector, Amplitude(0000)

Unassigned parameters: [alpha, beta, gamma].
</pre></div>
</div>
</div>
</div>
<p>As shown above, results types are part of the <code class="docutils literal notranslate"><span class="pre">print</span></code> information. We now run this circuit on the local simulator above and output these results.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># set up device</span>
<span class="n">device</span> <span class="o">=</span> <span class="n">LocalSimulator</span><span class="p">()</span>
<span class="c1"># run the circuit and output the results specified above</span>
<span class="n">task</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">circ</span><span class="p">,</span> <span class="n">shots</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;alpha&#39;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span> <span class="s1">&#39;beta&#39;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span> <span class="s1">&#39;gamma&#39;</span><span class="p">:</span> <span class="mf">0.3</span><span class="p">})</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Final state vector:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Expectation value &lt;Y1X2&gt;&quot;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Expectation value &lt;Z0Z1&gt;:&quot;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Amplitude &lt;00000|Final state&gt;:&quot;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Marginal probability for target qubit 3 in computational basis:&quot;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>This program uses OpenQASM language features that may not be supported on QPUs or on-demand simulators.
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Final state vector:
 [ 6.97129718e-02-0.01053609j  6.97129718e-02-0.01053609j
  0.00000000e+00+0.j          0.00000000e+00+0.j
  6.94804402e-01-0.10500941j  6.94804402e-01-0.10500941j
  0.00000000e+00+0.j          0.00000000e+00+0.j
  0.00000000e+00+0.j          0.00000000e+00+0.j
 -5.27243703e-04-0.00348856j -5.27243703e-04-0.00348856j
  0.00000000e+00+0.j          0.00000000e+00+0.j
 -5.25485051e-03-0.0347692j  -5.25485051e-03-0.0347692j ]
Expectation value &lt;Y1X2&gt; 0.0
Expectation value &lt;Z0Z1&gt;: -0.9751703272018153
Amplitude &lt;00000|Final state&gt;: {&#39;0000&#39;: (0.06971297180671754-0.010536085195500033j)}
Marginal probability for target qubit 3 in computational basis: [0.5 0.5]
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="advanced-logging">
<h2>ADVANCED LOGGING<a class="headerlink" href="#advanced-logging" title="Permalink to this heading">#</a></h2>
<p>Below we provide an example for advanced logging. Here, we change the <code class="docutils literal notranslate"><span class="pre">poll_timeout_seconds</span></code> and <code class="docutils literal notranslate"><span class="pre">poll_interval_seconds</span></code> parameters, such that a task can be long-running and the task status will be continuously logged to a file. You can also transfer this code to a python script instead of a Jupyter notebook, and the script can run as a process in the background so that your laptop can go to sleep and the script will still run. These advanced logging techniques allow you to see the background polling and create a record for later debugging.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># set filename for logs</span>
<span class="n">log_file</span> <span class="o">=</span> <span class="s1">&#39;device_logs-&#39;</span><span class="o">+</span><span class="n">datetime</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span> <span class="s1">&#39;%Y%m</span><span class="si">%d</span><span class="s1">%H%M%S&#39;</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;.txt&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Task info will be logged in:&#39;</span><span class="p">,</span> <span class="n">log_file</span><span class="p">)</span>

<span class="c1"># create new logger object</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;newLogger&quot;</span><span class="p">)</span>  
<span class="c1"># configure to log to file device_logs.txt in the appending mode</span>
<span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">log_file</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">))</span>
<span class="c1"># add to file all log messages with level DEBUG or above</span>
<span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Task info will be logged in: device_logs-20221110121905.txt
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># define circuit</span>
<span class="n">circ_log</span> <span class="o">=</span> <span class="n">Circuit</span><span class="p">()</span><span class="o">.</span><span class="n">rx</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">)</span><span class="o">.</span><span class="n">ry</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span><span class="o">.</span><span class="n">rz</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">)</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">cnot</span><span class="p">(</span><span class="n">control</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">cnot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">x</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">circ_log</span><span class="p">)</span>
<span class="c1"># define device</span>
<span class="n">device</span> <span class="o">=</span> <span class="n">AwsDevice</span><span class="p">(</span><span class="s2">&quot;arn:aws:braket:::device/quantum-simulator/amazon/sv1&quot;</span><span class="p">)</span>
<span class="c1"># define what info to log</span>
<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
    <span class="n">device</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">circ_log</span><span class="p">,</span> 
               <span class="n">poll_timeout_seconds</span><span class="o">=</span><span class="mi">1200</span><span class="p">,</span> <span class="n">poll_interval_seconds</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">,</span> <span class="n">shots</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
    <span class="o">.</span><span class="n">result</span><span class="p">()</span><span class="o">.</span><span class="n">measurement_counts</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>T  : |   0    | 1 |
                   
q0 : -Rx(0.15)-C---
               |   
q1 : -Ry(0.20)-|-C-
               | | 
q2 : -Rz(0.25)-X-|-
                 | 
q3 : -H----------X-
                   
q4 : -X------------

T  : |   0    | 1 |
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># print logs</span>
<span class="o">!</span> cat <span class="o">{</span>log_file<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Task arn:aws:braket:us-west-2:746192259860:quantum-task/b03f8639-b1f3-458e-89e3-0fb47e292e14: start polling for completion
Task arn:aws:braket:us-west-2:746192259860:quantum-task/b03f8639-b1f3-458e-89e3-0fb47e292e14: task status CREATED
Task arn:aws:braket:us-west-2:746192259860:quantum-task/b03f8639-b1f3-458e-89e3-0fb47e292e14: task status QUEUED
Task arn:aws:braket:us-west-2:746192259860:quantum-task/b03f8639-b1f3-458e-89e3-0fb47e292e14: task status RUNNING
Task arn:aws:braket:us-west-2:746192259860:quantum-task/b03f8639-b1f3-458e-89e3-0fb47e292e14: task status RUNNING
Task arn:aws:braket:us-west-2:746192259860:quantum-task/b03f8639-b1f3-458e-89e3-0fb47e292e14: task status COMPLETED
Counter({&#39;00001&#39;: 496, &#39;00011&#39;: 495, &#39;01001&#39;: 3, &#39;10111&#39;: 3, &#39;01011&#39;: 2, &#39;10101&#39;: 1})
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># parse log file for arn</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">log_file</span><span class="p">)</span> <span class="k">as</span> <span class="n">openfile</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">openfile</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">():</span>
            <span class="k">if</span> <span class="s2">&quot;arn:&quot;</span> <span class="ow">in</span> <span class="n">part</span><span class="p">:</span>
                <span class="n">arn</span> <span class="o">=</span> <span class="n">part</span>
                <span class="k">break</span>
<span class="c1"># remove final semicolon in logs</span>
<span class="n">arn</span> <span class="o">=</span> <span class="n">arn</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="c1"># print(arn)</span>

<span class="c1"># with this arn we can restore again task from unique arn</span>
<span class="n">task_load</span> <span class="o">=</span> <span class="n">AwsQuantumTask</span><span class="p">(</span><span class="n">arn</span><span class="o">=</span><span class="n">arn</span><span class="p">)</span>

<span class="c1"># get results of task</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">task_load</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>

<span class="c1"># get measurement shots</span>
<span class="n">counts</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">measurement_counts</span>

<span class="c1"># plot using Counter</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">counts</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">counts</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;tab:orange&#39;</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;bitstrings&#39;</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;counts&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../../_images/affe9901ea61ee64811998f0590b1e95636cc099a92dcff1bebc139aeb14616f.png" src="../../../_images/affe9901ea61ee64811998f0590b1e95636cc099a92dcff1bebc139aeb14616f.png" />
</div>
</div>
</section>
<hr class="docutils" />
<section id="appendix">
<h2>APPENDIX<a class="headerlink" href="#appendix" title="Permalink to this heading">#</a></h2>
<section id="appendix-sdk-version">
<h3>APPENDIX: SDK version<a class="headerlink" href="#appendix-sdk-version" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># print version of SDK</span>
<span class="o">!</span> pip show amazon-braket-sdk <span class="p">|</span> grep Version
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Version: 1.33.2.dev0
</pre></div>
</div>
</div>
</div>
</section>
<section id="appendix-advanced-functionality-with-asynchronous-execution">
<h3>APPENDIX: ADVANCED FUNCTIONALITY WITH ASYNCHRONOUS EXECUTION<a class="headerlink" href="#appendix-advanced-functionality-with-asynchronous-execution" title="Permalink to this heading">#</a></h3>
<p><strong>ASYNCHRONOUS EXECUTION</strong>: When replacing the <code class="docutils literal notranslate"><span class="pre">result()</span></code> call on the task object above with <code class="docutils literal notranslate"><span class="pre">async_result()</span></code>, we can get the quantum task result asynchronously. Consecutive calls to this method return the result cached from the most recent request. See <a class="reference external" href="https://github.com/aws/braket-python-sdk/blob/master/src/braket/aws/aws_quantum_task.py#L206">here</a> for source code implementation.</p>
<p>While <code class="docutils literal notranslate"><span class="pre">result()</span></code> is a blocking call that waits for the result, <code class="docutils literal notranslate"><span class="pre">async_result()</span></code> is a non-blocking call. For example, in Jupyter as shown here, if you run <code class="docutils literal notranslate"><span class="pre">result()</span></code>, the notebook will stop and wait at this cell for a certain polling time (set as <code class="docutils literal notranslate"><span class="pre">poll_timeout_seconds</span></code> with default of 5 days) till the polling returns the result object or times out. If you run <code class="docutils literal notranslate"><span class="pre">async_result()</span></code>, the notebook immediately goes to the next cell, <em>not</em> waiting for polling to complete. Calling <code class="docutils literal notranslate"><span class="pre">result()</span></code> on the <code class="docutils literal notranslate"><span class="pre">async_result</span></code> object before it has completed, an <code class="docutils literal notranslate"><span class="pre">asyncio.exceptions.InvalidStateError</span></code> will be raised. This is expected behavior. Later, you can call <code class="docutils literal notranslate"><span class="pre">result()</span></code> and get the actual result from the task.</p>
<p>Alternatively, we have provided a basic <code class="docutils literal notranslate"><span class="pre">asyncio</span></code> waiter function <code class="docutils literal notranslate"><span class="pre">wait_on_result()</span></code>, which will create a blocking call, wait for the result, and then return that result for downstream use. We have defaulted the notebook to leverage this call in favor of avoiding the <code class="docutils literal notranslate"><span class="pre">InvalidStateError</span></code>, but we have left the non-blocking <code class="docutils literal notranslate"><span class="pre">async_result.result()</span></code> call example as an option.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># asyncio waiter function to leverage Task.async_result() object</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">wait_on_result</span><span class="p">(</span><span class="n">async_result</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Waiting on task.&#39;</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">async_result</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Final task state: </span><span class="si">{</span><span class="n">async_result</span><span class="o">.</span><span class="n">_state</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">async_result</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
    
    <span class="k">return</span> <span class="n">res</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># example with async_result - immediately returns asyncio Future object</span>
<span class="n">async_result</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">circ2</span><span class="p">,</span> <span class="n">shots</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">async_result</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># async_result.result() then returns the actual result (once completed)</span>
<span class="c1"># Non-blocking call. Will raise an InvalidStateError if this is run before async task is complete:</span>
<span class="c1"># async_res = async_result.result()</span>
<span class="c1"># Blocking call, leveraging asyncio.run and await</span>
<span class="n">async_res</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">wait_on_result</span><span class="p">(</span><span class="n">async_result</span><span class="p">))</span>
<span class="c1"># get measurement shots</span>
<span class="n">counts</span> <span class="o">=</span> <span class="n">async_res</span><span class="o">.</span><span class="n">measurement_counts</span>
<span class="nb">print</span><span class="p">(</span><span class="n">counts</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Waiting on task.
Final task state: FINISHED
Counter({&#39;00&#39;: 100})
</pre></div>
</div>
</div>
</div>
<p>One can also define custom callbacks to be invoked when the Future is completed.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># async_result returns back a Future. </span>
<span class="c1"># Details on Future: https://docs.python.org/3.8/library/asyncio-future.html#asyncio.Future</span>
<span class="n">future</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">circ2</span><span class="p">,</span> <span class="n">shots</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">async_result</span><span class="p">()</span>

<span class="c1"># this is invoked when the Future is done. i.e. task is in a terminal state.</span>
<span class="c1"># This will print out to STDOUT when its done.</span>
<span class="k">def</span> <span class="nf">call_back_function</span><span class="p">(</span><span class="n">future</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Custom task Result: </span><span class="si">{</span><span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">()</span><span class="o">.</span><span class="n">measurement_probabilities</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># attached the callback function to the future.</span>
<span class="n">future</span><span class="o">.</span><span class="n">add_done_callback</span><span class="p">(</span><span class="n">call_back_function</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Task Summary&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">quantum_tasks_statistics</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Note: Charges shown are estimates based on your Amazon Braket simulator and quantum processing unit (QPU) task usage. Estimated charges shown may differ from your actual charges. Estimated charges do not factor in any discounts or credits, and you may experience additional charges based on your use of other services such as Amazon Elastic Compute Cloud (Amazon EC2).&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Estimated cost to run this example: </span><span class="si">{</span><span class="n">t</span><span class="o">.</span><span class="n">qpu_tasks_cost</span><span class="p">()</span> <span class="o">+</span> <span class="n">t</span><span class="o">.</span><span class="n">simulator_tasks_cost</span><span class="p">()</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> USD&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Task Summary
{&#39;arn:aws:braket:::device/quantum-simulator/amazon/sv1&#39;: {&#39;shots&#39;: 4200, &#39;tasks&#39;: {&#39;COMPLETED&#39;: 4, &#39;CANCELLING&#39;: 1, &#39;CREATED&#39;: 1}, &#39;execution_duration&#39;: datetime.timedelta(microseconds=175000), &#39;billed_execution_duration&#39;: datetime.timedelta(seconds=12)}}
Note: Charges shown are estimates based on your Amazon Braket simulator and quantum processing unit (QPU) task usage. Estimated charges shown may differ from your actual charges. Estimated charges do not factor in any discounts or credits, and you may experience additional charges based on your use of other services such as Amazon Elastic Compute Cloud (Amazon EC2).
Estimated cost to run this example: 0.02 USD
Custom task Result: {&#39;00&#39;: 1.0}
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Anatomy of Quantum Circuits and Quantum Tasks in Amazon Braket</a><ul>
<li><a class="reference internal" href="#import-statements">IMPORT STATEMENTS</a></li>
<li><a class="reference internal" href="#circuit-definition">CIRCUIT DEFINITION</a></li>
<li><a class="reference internal" href="#circuit-depth-and-circuit-size">CIRCUIT DEPTH AND CIRCUIT SIZE</a></li>
<li><a class="reference internal" href="#appending-circuits">APPENDING CIRCUITS</a></li>
<li><a class="reference internal" href="#circuit-execution-and-task-tracking">CIRCUIT EXECUTION AND TASK TRACKING</a></li>
<li><a class="reference internal" href="#demonstration-of-result-types-expectation-values-and-observables">DEMONSTRATION OF RESULT TYPES: Expectation Values and Observables</a><ul>
<li><a class="reference internal" href="#result-types-for-shots-0">RESULT TYPES FOR <code class="docutils literal notranslate"><span class="pre">shots=0</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#advanced-logging">ADVANCED LOGGING</a></li>
<li><a class="reference internal" href="#appendix">APPENDIX</a><ul>
<li><a class="reference internal" href="#appendix-sdk-version">APPENDIX: SDK version</a></li>
<li><a class="reference internal" href="#appendix-advanced-functionality-with-asynchronous-execution">APPENDIX: ADVANCED FUNCTIONALITY WITH ASYNCHRONOUS EXECUTION</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/scripts/furo.js"></script>
    </body>
</html>