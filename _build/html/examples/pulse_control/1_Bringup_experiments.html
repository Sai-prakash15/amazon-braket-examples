<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" />

    <!-- Generated with Sphinx 5.3.0 and Furo 2022.12.07 -->
        <title>Bringup Experiments - Amazon Braket Examples documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?digest=91d0f0d1c444bdcb17a68e833c7a53903343c195" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">Amazon Braket Examples  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  
  <span class="sidebar-brand-text">Amazon Braket Examples  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  
</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="bringup-experiments">
<h1>Bringup Experiments<a class="headerlink" href="#bringup-experiments" title="Permalink to this heading">#</a></h1>
<p>In this tutorial notebook, we will review common pulse sequences that are used as first steps during the bring up of more complex pulse experiments:</p>
<ul class="simple">
<li><p>measure the resonance frequency of a qubit</p></li>
<li><p>calibrate a $\pi$/2 pulse via Rabi spectroscopy</p></li>
<li><p>measure the $T^*_2$ coherence time with a Ramsey sequence</p></li>
</ul>
<p>You can use either Rigetti’s Aspen M-2 or OQC’s Lucy device to run this notebook.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Use Braket SDK Cost Tracking to estimate the cost to run this example</span>
<span class="kn">from</span> <span class="nn">braket.tracking</span> <span class="kn">import</span> <span class="n">Tracker</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">Tracker</span><span class="p">()</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s first import some packages to construct pulse sequences and analyze results.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline

<span class="kn">from</span> <span class="nn">braket.aws</span> <span class="kn">import</span> <span class="n">AwsDevice</span>
<span class="kn">from</span> <span class="nn">braket.pulse</span> <span class="kn">import</span> <span class="n">PulseSequence</span><span class="p">,</span> <span class="n">GaussianWaveform</span><span class="p">,</span> <span class="n">ConstantWaveform</span>
<span class="kn">from</span> <span class="nn">braket.parametric</span> <span class="kn">import</span> <span class="n">FreeParameter</span>

<span class="c1">## Imports for function fitting</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">scipy.optimize</span>
<span class="kn">from</span> <span class="nn">scipy.fft</span> <span class="kn">import</span> <span class="n">fft</span><span class="p">,</span> <span class="n">fftfreq</span>
</pre></div>
</div>
</div>
</div>
<p>You will be able to switch from one device to the other by setting the <code class="docutils literal notranslate"><span class="pre">device_name</span></code> to <code class="docutils literal notranslate"><span class="pre">aspen</span></code> or <code class="docutils literal notranslate"><span class="pre">lucy</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">device_name</span> <span class="o">=</span> <span class="s2">&quot;aspen&quot;</span>
</pre></div>
</div>
</div>
</div>
<p>We will use the following configuration to control the different parameters for our experiments across the available devices</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">experiment_configuration</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;aspen&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;device_arn&quot;</span><span class="p">:</span> <span class="s2">&quot;arn:aws:braket:us-west-1::device/qpu/rigetti/Aspen-M-2&quot;</span><span class="p">,</span>
        <span class="s2">&quot;qubit&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
        <span class="s2">&quot;drive_frame&quot;</span><span class="p">:</span> <span class="s2">&quot;q4_rf_frame&quot;</span><span class="p">,</span>
        <span class="s2">&quot;readout_frame&quot;</span><span class="p">:</span> <span class="s2">&quot;q4_ro_rx_frame&quot;</span><span class="p">,</span>
        <span class="s2">&quot;spectroscopy_wf&quot;</span><span class="p">:</span> <span class="n">GaussianWaveform</span><span class="p">(</span><span class="mf">100e-9</span><span class="p">,</span> <span class="mf">25e-9</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
        <span class="s2">&quot;rabi_wf&quot;</span><span class="p">:</span> <span class="n">GaussianWaveform</span><span class="p">(</span><span class="n">FreeParameter</span><span class="p">(</span><span class="s2">&quot;length&quot;</span><span class="p">),</span> <span class="n">FreeParameter</span><span class="p">(</span><span class="s2">&quot;length&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="s2">&quot;lucy&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;device_arn&quot;</span><span class="p">:</span> <span class="s2">&quot;arn:aws:braket:eu-west-2::device/qpu/oqc/Lucy&quot;</span><span class="p">,</span>
        <span class="s2">&quot;qubit&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;drive_frame&quot;</span><span class="p">:</span> <span class="s2">&quot;q0_drive&quot;</span><span class="p">,</span>
        <span class="s2">&quot;readout_frame&quot;</span><span class="p">:</span> <span class="s2">&quot;r0_measure&quot;</span><span class="p">,</span>
        <span class="s2">&quot;spectroscopy_wf&quot;</span><span class="p">:</span> <span class="n">ConstantWaveform</span><span class="p">(</span><span class="mf">25e-9</span><span class="p">,</span> <span class="mf">0.03</span><span class="p">),</span>
        <span class="s2">&quot;rabi_wf&quot;</span><span class="p">:</span> <span class="n">ConstantWaveform</span><span class="p">(</span><span class="n">FreeParameter</span><span class="p">(</span><span class="s2">&quot;length&quot;</span><span class="p">),</span> <span class="mf">0.07</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>Here we will first instantiate a device that will provide access to some properties such as frames</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">device</span> <span class="o">=</span> <span class="n">AwsDevice</span><span class="p">(</span><span class="n">experiment_configuration</span><span class="p">[</span><span class="n">device_name</span><span class="p">][</span><span class="s2">&quot;device_arn&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>With both devices, frames are predefined in the device capabilities and can be loaded with the Amazon Braket SDK. In this notebook, we will drive a single qubit, which only requires the frames:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">q4_rf_frame</span></code> to drive the qubit and <code class="docutils literal notranslate"><span class="pre">q4_ro_rx_frame</span></code> to measure it. (Rigetti Aspen M-2)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">q0_drive</span></code> to drive the qubit and <code class="docutils literal notranslate"><span class="pre">r0_measure</span></code> to measure it. (OQC Lucy)</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">qubit</span> <span class="o">=</span> <span class="n">experiment_configuration</span><span class="p">[</span><span class="n">device_name</span><span class="p">][</span><span class="s2">&quot;qubit&quot;</span><span class="p">]</span>
<span class="n">drive_frame</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">frames</span><span class="p">[</span><span class="n">experiment_configuration</span><span class="p">[</span><span class="n">device_name</span><span class="p">][</span><span class="s2">&quot;drive_frame&quot;</span><span class="p">]]</span>
<span class="n">readout_frame</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">frames</span><span class="p">[</span><span class="n">experiment_configuration</span><span class="p">[</span><span class="n">device_name</span><span class="p">][</span><span class="s2">&quot;readout_frame&quot;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
</div>
<section id="qubit-spectropscopy">
<h2>Qubit spectropscopy<a class="headerlink" href="#qubit-spectropscopy" title="Permalink to this heading">#</a></h2>
<p>Qubit spectroscopy is one of the first step to charaterize a qubit. While this information is already present in the frame properties, we will build a pulse sequence to estimate the transition frequency between the ground state and the first excited state.</p>
<p>For simplicity, we will use Gaussian or Constant waveforms as envelopes of the different pulses. The Gaussian waveforms are parametrized by their amplitude $A$ and the length $d$ of their pulse window. They are positioned at the center of the window ($d$/2) and their width (1/e) will be set to be a quarter of the window length ($d$/4). The Constant waveforms have a complex amplitude $iq$ .</p>
<p>For qubit spectroscopy, while a prior knowledge of the systems helps choosing these parameters to increase the signal-to-noise ratio, it is not necessary to tune them precisely.</p>
<p>With Aspen, we will use a pulse length of 100ns, the Gaussian has a width of 25ns and its amplitude is 0.1. With Lucy, We will use a pulse length of 25ns and an amplitude is 0.03. The amplitude unit should be considered as arbitrary, the maximum amplitude can be retrieved from the device capabilities, please see the documentation for more details.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">waveform</span> <span class="o">=</span> <span class="n">experiment_configuration</span><span class="p">[</span><span class="n">device_name</span><span class="p">][</span><span class="s2">&quot;spectroscopy_wf&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>The pulse sequence below contains three instructions:</p>
<ul class="simple">
<li><p>The first sets the frequency of the microwave signal to a chosen frequency among the range of frequency to probe</p></li>
<li><p>The second plays the waveform.</p></li>
<li><p>The third instruction is a readout instruction. Measurements are realized via the predefined function capture_v0() that executes a projective measurement of the qubit and returns the projected eigenstate.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">frequency</span> <span class="o">=</span> <span class="n">FreeParameter</span><span class="p">(</span><span class="s2">&quot;frequency&quot;</span><span class="p">)</span>

<span class="n">pulse_sequence</span> <span class="o">=</span> <span class="p">(</span> 
    <span class="n">PulseSequence</span><span class="p">()</span>
    <span class="o">.</span><span class="n">set_frequency</span><span class="p">(</span><span class="n">drive_frame</span><span class="p">,</span> <span class="n">frequency</span><span class="p">)</span>
    <span class="o">.</span><span class="n">play</span><span class="p">(</span><span class="n">drive_frame</span><span class="p">,</span> <span class="n">waveform</span><span class="p">)</span>
    <span class="o">.</span><span class="n">capture_v0</span><span class="p">(</span><span class="n">readout_frame</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We will sweep the frequency over a range that is centered around the expected transition frequency. For that, we use the FreeParameter object that we defined in the previous cell and create a new pulse sequence by binding the FreeParameter to each tested frequency.</p>
<p>We then run our batch of pulse sequence with <code class="docutils literal notranslate"><span class="pre">device.run_batch</span></code>, which returns a batch of quantum tasks.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">span</span> <span class="o">=</span> <span class="mf">75e6</span>
<span class="n">N_steps</span> <span class="o">=</span> <span class="mi">25</span>
<span class="n">N_shots</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">frequencies</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">drive_frame</span><span class="o">.</span><span class="n">frequency</span><span class="o">-</span><span class="n">span</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">drive_frame</span><span class="o">.</span><span class="n">frequency</span><span class="o">+</span><span class="n">span</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">N_steps</span><span class="p">)</span>

<span class="n">qubit_spectroscopy_sequences</span> <span class="o">=</span> <span class="p">[</span><span class="n">pulse_sequence</span><span class="p">(</span><span class="n">frequency</span><span class="o">=</span><span class="n">frequency</span><span class="p">)</span> <span class="k">for</span> <span class="n">frequency</span> <span class="ow">in</span> <span class="n">frequencies</span><span class="p">]</span>
<span class="n">batch</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">run_batch</span><span class="p">(</span><span class="n">qubit_spectroscopy_sequences</span><span class="p">,</span> <span class="n">shots</span><span class="o">=</span><span class="n">N_shots</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>After executing this batch of tasks, we are ready to analyze the results. We will use a simple Gaussian fit function to extract the transition frequency.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">resonance_fit</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">A0</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">x0</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">A0</span><span class="o">-</span><span class="n">A</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">x0</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="n">w</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The result format is the same as with circuits, which means that <code class="docutils literal notranslate"><span class="pre">result()</span></code> will return a task result object that includes a counter with the number of occurences for each eigenstate of the measurement basis. Since we have been using a batch, we can quickly construct the probability to measure the state $|0\rangle$.</p>
<p>The data are then plotted and fitted with the previously defined fit function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">probability_of_zero</span> <span class="o">=</span> <span class="p">[</span><span class="n">result</span><span class="o">.</span><span class="n">measurement_counts</span><span class="p">[</span><span class="s1">&#39;0&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">N_shots</span> <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">batch</span><span class="o">.</span><span class="n">results</span><span class="p">()]</span>

<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">frequencies</span><span class="p">,</span> <span class="n">probability_of_zero</span>

<span class="n">initial_guess</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">10e6</span><span class="p">,</span> <span class="n">drive_frame</span><span class="o">.</span><span class="n">frequency</span><span class="p">]</span> <span class="c1"># Amplitude, Offset, width, centerFrequency</span>
<span class="n">optimal_params</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">optimize</span><span class="o">.</span><span class="n">curve_fit</span><span class="p">(</span><span class="n">resonance_fit</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">p0</span><span class="o">=</span><span class="n">initial_guess</span><span class="p">)</span>
<span class="n">x_fit</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">x</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mi">10</span><span class="p">)</span>
<span class="n">y_fit</span> <span class="o">=</span> <span class="n">resonance_fit</span><span class="p">(</span><span class="n">x_fit</span><span class="p">,</span> <span class="o">*</span><span class="n">optimal_params</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x_fit</span><span class="p">,</span><span class="n">y_fit</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Frequency (Hz)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Population&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">vlines</span><span class="p">(</span><span class="n">drive_frame</span><span class="o">.</span><span class="n">frequency</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">y_fit</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">resonance_frequency</span> <span class="o">=</span> <span class="n">optimal_params</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Expected resonance frequency:&#39;</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">drive_frame</span><span class="o">.</span><span class="n">frequency</span><span class="o">*</span><span class="mf">1e-6</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="s1">&#39;GHz&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Measured resonance frequency:&#39;</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">resonance_frequency</span><span class="o">*</span><span class="mf">1e-6</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="s1">&#39;GHz&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Expected resonance frequency: 4728.33 GHz
Measured resonance frequency: 4726.44 GHz
</pre></div>
</div>
<img alt="../../_images/836bbb6c62a4b75caa22116f6469e6d4f9c013309ed25fbf5b3a6d52c6fd60db.png" src="../../_images/836bbb6c62a4b75caa22116f6469e6d4f9c013309ed25fbf5b3a6d52c6fd60db.png" />
</div>
</div>
</section>
<section id="calibrating-pi-2-pulses-via-rabi-spectroscopy">
<h2>Calibrating $\pi$/2 pulses via Rabi spectroscopy<a class="headerlink" href="#calibrating-pi-2-pulses-via-rabi-spectroscopy" title="Permalink to this heading">#</a></h2>
<p>Applying an electromagnetic field to a qubit leads to Rabi flopping, a cyclic behavior that is used to calibrate specific pulse parameters. Here, we will determine the optimal pulse length to realize a $\pi$/2 pulse, an elementary block used to build more complex pulse sequences, such as the Ramsey sequence.</p>
<p>Below, we will reuse the previous pulse sequence. First, we will fix the driving frequency to the resonance frequency and replace the coarsely-chosen pulse length by a FreeParameter.</p>
<p>We also choose to increase the amplitude of the waveform to increase the rate of the expected oscillations.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">waveform</span> <span class="o">=</span> <span class="n">experiment_configuration</span><span class="p">[</span><span class="n">device_name</span><span class="p">][</span><span class="s2">&quot;rabi_wf&quot;</span><span class="p">]</span>

<span class="n">rabi_sequence</span> <span class="o">=</span> <span class="p">(</span> 
    <span class="n">PulseSequence</span><span class="p">()</span>
    <span class="o">.</span><span class="n">set_frequency</span><span class="p">(</span><span class="n">drive_frame</span><span class="p">,</span> <span class="n">drive_frame</span><span class="o">.</span><span class="n">frequency</span><span class="p">)</span>
    <span class="o">.</span><span class="n">play</span><span class="p">(</span><span class="n">drive_frame</span><span class="p">,</span> <span class="n">waveform</span><span class="p">)</span>
    <span class="o">.</span><span class="n">capture_v0</span><span class="p">(</span><span class="n">readout_frame</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>As for qubit spectroscopy, we will sweep one parameter of our pulse sequence, here the length of the waveform.</p>
<p>We construct another batch of task with lengths ranging from 12ns to 200ns with a step of 12ns so all the sequences verify the 4-sample constraint (waveforms must have a length multiple of 4ns).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">start_length</span><span class="o">=</span><span class="mf">12e-9</span>
<span class="n">end_length</span><span class="o">=</span><span class="mf">2e-7</span>
<span class="n">lengths</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start_length</span><span class="p">,</span> <span class="n">end_length</span><span class="p">,</span> <span class="mf">12e-9</span><span class="p">)</span>
<span class="n">N_shots</span> <span class="o">=</span> <span class="mi">100</span>

<span class="n">pulse_sequences</span> <span class="o">=</span> <span class="p">[</span><span class="n">rabi_sequence</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="n">length</span><span class="p">)</span> <span class="k">for</span> <span class="n">length</span> <span class="ow">in</span> <span class="n">lengths</span><span class="p">]</span>

<span class="n">batch</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">run_batch</span><span class="p">(</span><span class="n">pulse_sequences</span><span class="p">,</span> <span class="n">shots</span><span class="o">=</span><span class="n">N_shots</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>To increase the chances of fitting success, we estimate some initial parameters values:</p>
<ul class="simple">
<li><p>initial signal mean is taken as the mean of the measurement data</p></li>
<li><p>initial Rabi frequency is set as the position of the maximum value of the measurement data’s FFT</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">damped_oscillation_fit</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">A0</span><span class="p">,</span> <span class="n">Tau</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">x0</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">A</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="o">/</span><span class="n">Tau</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">x0</span><span class="p">)</span><span class="o">*</span><span class="n">f</span><span class="p">)</span><span class="o">+</span><span class="n">A0</span>

<span class="k">def</span> <span class="nf">estimate_fit_parameters</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="n">signal_mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
    <span class="n">idx_max</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">fft</span><span class="p">(</span><span class="n">y</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">y</span><span class="p">))))</span>
    <span class="n">oscillation_frequency_estimate</span> <span class="o">=</span> <span class="n">fftfreq</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">x</span><span class="p">)[</span><span class="mi">0</span><span class="p">])[</span><span class="n">idx_max</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">signal_mean</span><span class="p">,</span> <span class="n">oscillation_frequency_estimate</span>
</pre></div>
</div>
</div>
</div>
<p>The projected state after the qubit measurement reflects the oscillatory dynamics of the qubit that oscillates between the state $|0\rangle$ and the state $|1\rangle$.
From the measurement data, one can extract the Rabi frequency as the flipping rate and compute the length of $\pi/2$ pulse.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">probability_of_zero</span> <span class="o">=</span> <span class="p">[</span><span class="n">result</span><span class="o">.</span><span class="n">measurement_counts</span><span class="p">[</span><span class="s1">&#39;0&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">N_shots</span> <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">batch</span><span class="o">.</span><span class="n">results</span><span class="p">()]</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">lengths</span><span class="p">,</span> <span class="n">probability_of_zero</span>

<span class="n">signal_mean</span><span class="p">,</span> <span class="n">oscillation_frequency_estimate</span> <span class="o">=</span> <span class="n">estimate_fit_parameters</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>

<span class="n">initial_guess</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">signal_mean</span><span class="p">,</span> <span class="mf">8e-6</span><span class="p">,</span> <span class="n">oscillation_frequency_estimate</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">optimal_params</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">optimize</span><span class="o">.</span><span class="n">curve_fit</span><span class="p">(</span><span class="n">damped_oscillation_fit</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">p0</span><span class="o">=</span><span class="n">initial_guess</span><span class="p">)</span>
<span class="n">x_fit</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">x</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mi">10</span><span class="p">)</span>
<span class="n">y_fit</span> <span class="o">=</span> <span class="n">damped_oscillation_fit</span><span class="p">(</span><span class="n">x_fit</span><span class="p">,</span> <span class="o">*</span><span class="n">optimal_params</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x_fit</span><span class="p">,</span><span class="n">y_fit</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Pulse duration (s)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Population&quot;</span><span class="p">)</span>


<span class="n">rabi_frequency</span> <span class="o">=</span> <span class="n">optimal_params</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="n">phase_offset</span> <span class="o">=</span> <span class="n">optimal_params</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
<span class="n">x90_duration</span><span class="o">=</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">rabi_frequency</span><span class="p">)</span><span class="o">+</span><span class="n">phase_offset</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x90_duration</span><span class="p">,</span> <span class="n">damped_oscillation_fit</span><span class="p">(</span><span class="n">x90_duration</span><span class="p">,</span> <span class="o">*</span><span class="n">optimal_params</span><span class="p">),</span> <span class="s1">&#39;ks&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Rabi frequency:&#39;</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">rabi_frequency</span><span class="o">*</span><span class="mf">1e-6</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="s1">&#39; MHz&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;rx(pi/2) length: &#39;</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">x90_duration</span><span class="o">*</span><span class="mf">1e9</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="s1">&#39; ns&#39;</span><span class="p">)</span>

<span class="c1"># Pulse duration must be a multiple of 4ns</span>
<span class="n">x90_duration</span><span class="o">=</span><span class="n">x90_duration</span><span class="o">//</span><span class="mf">4e-9</span><span class="o">*</span><span class="mf">4e-9</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x90_duration</span><span class="p">,</span> <span class="n">damped_oscillation_fit</span><span class="p">(</span><span class="n">x90_duration</span><span class="p">,</span> <span class="o">*</span><span class="n">optimal_params</span><span class="p">),</span> <span class="s1">&#39;rs&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Redefined rx(pi/2) length: &#39;</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">x90_duration</span><span class="o">*</span><span class="mf">1e9</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="s1">&#39; ns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Rabi frequency: 13.13  MHz
rx(pi/2) length:  17.62  ns
Redefined rx(pi/2) length:  16.0  ns
</pre></div>
</div>
<img alt="../../_images/e126838e309cb63d0ddcb2c50c66ac7fd5c96c6dd56ee7c6318b5aa1ded62129.png" src="../../_images/e126838e309cb63d0ddcb2c50c66ac7fd5c96c6dd56ee7c6318b5aa1ded62129.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">experiment_configuration</span><span class="p">[</span><span class="s2">&quot;aspen&quot;</span><span class="p">][</span><span class="s2">&quot;x90_wf&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">GaussianWaveform</span><span class="p">(</span><span class="n">x90_duration</span><span class="p">,</span> <span class="n">x90_duration</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">experiment_configuration</span><span class="p">[</span><span class="s2">&quot;lucy&quot;</span><span class="p">][</span><span class="s2">&quot;x90_wf&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ConstantWaveform</span><span class="p">(</span><span class="n">x90_duration</span><span class="p">,</span> <span class="mf">0.07</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="ramsey-sequence-t-2-measurement">
<h1>Ramsey sequence - $T^*_2$ Measurement<a class="headerlink" href="#ramsey-sequence-t-2-measurement" title="Permalink to this heading">#</a></h1>
<p>In the following, we implement a Ramsey sequence that allows you to measure the coherence time of a qubit. The Ramsey sequence consists of two $\pi$/2 pulses separated by a varying gap. Starting from the $|0\rangle$ state, the first pulse creates an equal superposition of $|0\rangle$ and $|1\rangle$ which will decay back to a mixed state after a characteristic time called $T^*_2$.</p>
<p>For better visualization, the carrier frequency is shifted away from the resonance frequency by some arbitraryily-chosen detuning which causes the frame of the driving to rotate with respect to the qubit frame. This results in oscillations at a rate equal to the detuning on top of the decoherence decay.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">detuning</span><span class="o">=</span><span class="mf">250e3</span>
<span class="n">x90</span> <span class="o">=</span> <span class="n">experiment_configuration</span><span class="p">[</span><span class="n">device_name</span><span class="p">][</span><span class="s2">&quot;x90_wf&quot;</span><span class="p">]</span>

<span class="n">delay</span> <span class="o">=</span> <span class="n">FreeParameter</span><span class="p">(</span><span class="s2">&quot;delay&quot;</span><span class="p">)</span>
<span class="n">ramsey_spectroscopy</span> <span class="o">=</span> <span class="p">(</span> 
    <span class="n">PulseSequence</span><span class="p">()</span>
    <span class="o">.</span><span class="n">set_frequency</span><span class="p">(</span><span class="n">drive_frame</span><span class="p">,</span> <span class="n">drive_frame</span><span class="o">.</span><span class="n">frequency</span> <span class="o">-</span> <span class="n">detuning</span><span class="p">)</span>
    <span class="o">.</span><span class="n">play</span><span class="p">(</span><span class="n">drive_frame</span><span class="p">,</span> <span class="n">x90</span><span class="p">)</span>
    <span class="o">.</span><span class="n">delay</span><span class="p">(</span><span class="n">drive_frame</span><span class="p">,</span> <span class="n">delay</span><span class="p">)</span>
    <span class="o">.</span><span class="n">play</span><span class="p">(</span><span class="n">drive_frame</span><span class="p">,</span> <span class="n">x90</span><span class="p">)</span>
    <span class="o">.</span><span class="n">capture_v0</span><span class="p">(</span><span class="n">readout_frame</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Once again, we will sweep a parameter of the sequence which is the time gap between the two $\pi$/2-pulses.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">start_delay</span><span class="o">=</span><span class="mf">12e-9</span>
<span class="n">end_delay</span><span class="o">=</span><span class="mf">40000e-9</span>
<span class="n">delays</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start_delay</span><span class="p">,</span> <span class="n">end_delay</span><span class="p">,</span> <span class="mf">512e-9</span><span class="p">)</span>
<span class="n">N_shots</span><span class="o">=</span><span class="mi">100</span>

<span class="n">pulse_sequences</span> <span class="o">=</span> <span class="p">[</span><span class="n">ramsey_spectroscopy</span><span class="p">(</span><span class="n">delay</span><span class="o">=</span><span class="n">delay</span><span class="p">)</span> <span class="k">for</span> <span class="n">delay</span> <span class="ow">in</span> <span class="n">delays</span><span class="p">]</span>

<span class="n">batch</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">run_batch</span><span class="p">(</span><span class="n">pulse_sequences</span><span class="p">,</span> <span class="n">shots</span><span class="o">=</span><span class="n">N_shots</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Plotting and fitting are not different from what we have seen with Rabi oscillations. We can now experimentally verify that the oscillations correspond to the frequency detuning of our pulses, and we can extract the coherence time $T^*_2$ of the qubit</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">probability_of_zero</span> <span class="o">=</span> <span class="p">[</span><span class="n">result</span><span class="o">.</span><span class="n">measurement_counts</span><span class="p">[</span><span class="s1">&#39;0&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">N_shots</span> <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">batch</span><span class="o">.</span><span class="n">results</span><span class="p">()]</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">delays</span><span class="p">,</span> <span class="n">probability_of_zero</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span> <span class="s1">&#39;o-&#39;</span><span class="p">)</span>

<span class="n">signal_mean</span><span class="p">,</span> <span class="n">oscillation_frequency_estimate</span> <span class="o">=</span> <span class="n">estimate_fit_parameters</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
<span class="n">initial_guess</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">signal_mean</span><span class="p">,</span> <span class="mf">2e-5</span><span class="p">,</span> <span class="n">oscillation_frequency_estimate</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>

<span class="n">optimal_params</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">optimize</span><span class="o">.</span><span class="n">curve_fit</span><span class="p">(</span><span class="n">damped_oscillation_fit</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">p0</span><span class="o">=</span><span class="n">initial_guess</span><span class="p">)</span>
<span class="n">x_fit</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">x</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="mi">10</span><span class="p">)</span>
<span class="n">y_fit</span> <span class="o">=</span> <span class="n">damped_oscillation_fit</span><span class="p">(</span><span class="n">x_fit</span><span class="p">,</span> <span class="o">*</span><span class="n">optimal_params</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x_fit</span><span class="p">,</span><span class="n">y_fit</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Delay (s)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Population&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Detuning:&#39;</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">optimal_params</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">*</span><span class="mf">1e-3</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="s1">&#39; kHz&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;T2: &#39;</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">optimal_params</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span><span class="o">*</span><span class="mf">1e6</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="s1">&#39; us&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Detuning: 258.53  kHz
T2:  33.33  us
</pre></div>
</div>
<img alt="../../_images/9b59a12f0b62dd4348e52a94b6f30c9f8727d7a8353c248a2e1e7a641d201db5.png" src="../../_images/9b59a12f0b62dd4348e52a94b6f30c9f8727d7a8353c248a2e1e7a641d201db5.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Task Summary&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">quantum_tasks_statistics</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Note: Charges shown are estimates based on your Amazon Braket simulator and quantum processing unit (QPU) task usage. Estimated charges shown may differ from your actual charges. Estimated charges do not factor in any discounts or credits, and you may experience additional charges based on your use of other services such as Amazon Elastic Compute Cloud (Amazon EC2).&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Estimated cost to run this example: </span><span class="si">{</span><span class="n">t</span><span class="o">.</span><span class="n">qpu_tasks_cost</span><span class="p">()</span> <span class="o">+</span> <span class="n">t</span><span class="o">.</span><span class="n">simulator_tasks_cost</span><span class="p">()</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2"> USD&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Task Summary
{&#39;arn:aws:braket:us-west-1::device/qpu/rigetti/Aspen-M-2&#39;: {&#39;shots&#39;: 12000, &#39;tasks&#39;: {&#39;COMPLETED&#39;: 120}}}
Note: Charges shown are estimates based on your Amazon Braket simulator and quantum processing unit (QPU) task usage. Estimated charges shown may differ from your actual charges. Estimated charges do not factor in any discounts or credits, and you may experience additional charges based on your use of other services such as Amazon Elastic Compute Cloud (Amazon EC2).
Estimated cost to run this example: 40.200 USD
</pre></div>
</div>
</div>
</div>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Bringup Experiments</a><ul>
<li><a class="reference internal" href="#qubit-spectropscopy">Qubit spectropscopy</a></li>
<li><a class="reference internal" href="#calibrating-pi-2-pulses-via-rabi-spectroscopy">Calibrating $\pi$/2 pulses via Rabi spectroscopy</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ramsey-sequence-t-2-measurement">Ramsey sequence - $T^*_2$ Measurement</a></li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/scripts/furo.js"></script>
    </body>
</html>